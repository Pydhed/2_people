<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="PWA –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –Ω–∞—Å">
    <meta name="theme-color" content="#2196F3">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>–ù–∞—à–∞ –ò—Å—Ç–æ—Ä–∏—è</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 192 192'><rect fill='%232196F3' width='192' height='192'/><text x='96' y='120' font-size='120' fill='white' text-anchor='middle' font-weight='bold'>üíï</text></svg>">
    <link rel="manifest" href='data:application/json,{"name": "–ù–∞—à–∞ –ò—Å—Ç–æ—Ä–∏—è", "short_name": "–ò—Å—Ç–æ—Ä–∏—è", "description": "–°–æ–≤–º–µ—Å—Ç–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ", "start_url": "/", "display": "standalone", "background_color": "#ffffff", "theme_color": "#2196F3", "icons": [{"src": "data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 192 192%22><rect fill=%22%232196F3%22 width=%22192%22 height=%22192%22/><text x=%2296%22 y=%22120%22 font-size=%22120%22 fill=%22white%22 text-anchor=%22middle%22 font-weight=%22bold%22>üíï</text></svg>", "sizes": "192x192", "type": "image/svg+xml", "purpose": "any"}]}'>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif; 
            background-color: #f0f4f8;
            background-image: 
                url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M15 25 Q 15 10 25 18 L 30 18 L 35 18 Q 45 10 45 25 Q 50 35 30 45 Q 10 35 15 25 Z' fill='none' stroke='%232196F3' stroke-opacity='0.15' stroke-width='2'/%3E%3C/svg%3E"),
                linear-gradient(135deg, #f0f4f8 0%, #e8f1f7 100%);
            background-size: 60px 60px, cover;
            color: #1a1a1a; 
            overflow-x: hidden; 
            touch-action: manipulation; 
        }

        .container { display: flex; min-height: 100vh; }
        
        /* Sidebar (Desktop) */
        .sidebar { display: none; width: 280px; background: white; border-right: 1px solid #d0dce7; padding: 20px; position: fixed; height: 100vh; overflow-y: auto; }
        .sidebar-header { display: flex; align-items: center; gap: 10px; margin-bottom: 30px; font-size: 24px; color: #2196F3; font-weight: bold; }
        .nav-item { padding: 12px 16px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 12px; color: #666; border: none; background: none; width: 100%; text-align: left; margin-bottom: 5px;}
        .nav-item:hover, .nav-item.active { background: #e3f2fd; color: #2196F3; }
        
        /* Main Content */
        .main-content { flex: 1; display: flex; flex-direction: column; width: 100%; }
        .screen { display: none; padding: 20px; flex: 1; overflow-y: auto; padding-bottom: 90px; }
        .screen.active { display: block; }
        
        @media (min-width: 1024px) { .sidebar { display: block; } .main-content { margin-left: 280px; } .bottom-nav { display: none !important; } }
        
        /* Cards */
        .cards-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); 
            gap: 16px; 
            margin-bottom: 24px; 
        }
        
        /* Timer Grid (Counters) */
        .timer-grid { 
            display: grid; 
            grid-template-columns: repeat(2, 1fr); 
            gap: 12px; 
            margin-bottom: 24px; 
        }
        @media (min-width: 600px) {
            .timer-grid { grid-template-columns: repeat(4, 1fr); }
        }

        .card { 
            background: white; 
            border-radius: 12px; 
            padding: 16px; 
            box-shadow: 0 2px 8px rgba(33,150,243,0.08); 
            text-align: center; 
            border: 1px solid #e3f2fd; 
            position: relative; 
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .card-value { font-size: 28px; font-weight: 700; color: #2196F3; }
        .card-label { font-size: 12px; color: #999; text-transform: uppercase; margin-top: 4px; letter-spacing: 0.5px;}

        /* –ö–û–ú–ü–ê–ö–¢–ù–´–ô –ì–†–ò–î –¥–ª—è –î–∞—Ç –∏ –¶–µ–ª–µ–π */
        #importantDatesGrid, #goalsCompactGrid {
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }

        /* –°—Ç–∏–ª—å –¥–ª—è –∏–Ω–ø—É—Ç–æ–≤ –¥–∞—Ç –∏ —Ü–µ–ª–µ–π –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É */
        .compact-input-group {
            display: flex;
            align-items: flex-end; 
            gap: 10px;
            flex-wrap: wrap; 
            background: white; 
            padding: 15px; 
            border-radius: 12px; 
            margin-bottom: 20px; 
            border: 1px solid #e3f2fd;
        }
        .compact-input-group > div {
            flex: 1 1 30%; 
            min-width: 120px;
        }
        .compact-input-group input {
            margin-bottom: 0;
        }
        .compact-input-group button {
            flex: 0 0 auto; 
            width: auto;
            padding: 12px 20px;
        }
        
        /* Chat */
        .chat-container { display: flex; flex-direction: column; height: calc(100vh - 180px); }
        .messages { flex: 1; overflow-y: auto; margin-bottom: 16px; display: flex; flex-direction: column; gap: 10px; padding: 10px; }
        .message { display: flex; max-width: 85%; position: relative; }
        .message.sent { align-self: flex-end; justify-content: flex-end; margin-left: auto; }
        .message-bubble { 
            padding: 10px 14px; 
            border-radius: 16px; 
            font-size: 14px; 
            word-wrap: break-word; 
            position: relative; 
        }
        .message.sent .message-bubble { 
            background: #007bff; 
            color: white; 
            border-bottom-right-radius: 2px; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.15); 
        }
        .message.received .message-bubble { 
            background: #ffffff; 
            color: #1a1a1a; 
            border: 1px solid #ddd;
            border-bottom-left-radius: 2px; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .delete-msg { position: absolute; top: -8px; left: -8px; background: #ff4444; color: white; border-radius: 50%; width: 18px; height: 18px; font-size: 12px; border: none; cursor: pointer; display: none; justify-content: center; align-items: center; z-index: 10;}
        .message:hover .delete-msg { display: flex; }

        .chat-input-group { display: flex; gap: 8px; padding-top: 10px; border-top: 1px solid #eee; }
        .chat-input { flex: 1; padding: 12px; border: 1px solid #ddd; border-radius: 20px; outline: none; }
        .send-btn { width: 40px; height: 40px; border-radius: 50%; background: #2196F3; color: white; border: none; cursor: pointer; }
        
        /* Wall */
        #drawingCanvasContainer {
            width: 100%;
            max-width: 600px; 
            margin: 0 auto 15px;
            position: relative;
            padding-top: 133.33%; /* 4/3 * 100% = 133.33% (–¥–ª—è 3:4) */
            background: white;
            border-radius: 12px; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        #drawingCanvas { 
            position: absolute;
            top: 0; left: 0; bottom: 0; right: 0;
            width: 100%; 
            height: 100%; 
            display: block; 
            cursor: crosshair; 
            border: none;
            border-radius: 12px;
        }
        
        /* Postcards (Collage Style) */
        .postcards-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); 
            gap: 25px; 
            padding: 10px;
        }
        
        .postcard { 
            position: relative; 
            aspect-ratio: 3/4; 
            background: white; 
            padding: 0; 
            box-shadow: 3px 3px 10px rgba(0,0,0,0.15); 
            border-radius: 2px; 
            overflow: visible; 
            border: 6px solid white; 
            border-bottom: 25px solid white; 
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.27);
        }

        .postcard img { width: 100%; height: 100%; object-fit: cover; border-radius: 0; }
        
        /* –≠—Ñ—Ñ–µ–∫—Ç —Ä–∞–∑–±—Ä–æ—Å–∞–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ */
        .postcard:nth-child(odd) { transform: rotate(-3deg); }
        .postcard:nth-child(even) { transform: rotate(2deg); }
        .postcard:nth-child(3n) { transform: rotate(4deg); }
        .postcard:nth-child(4n) { transform: rotate(-5deg); }

        .postcard:hover {
            transform: scale(1.05) rotate(0deg) !important;
            z-index: 100;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .delete-card { position: absolute; top: -15px; right: -15px; background: rgba(255, 68, 68, 1); color: white; border: none; border-radius: 50%; width: 26px; height: 26px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 14px; box-shadow: 0 2px 5px rgba(0,0,0,0.2); z-index: 5; }
        .author-label { position: absolute; bottom: -20px; left: 0; right: 0; color: #666; font-size: 11px; padding: 2px 5px; text-align: center; font-family: cursive; }

        /* Controls */
        .btn { padding: 10px 20px; background: #2196F3; color: white; border: none; border-radius: 6px; cursor: pointer; width: 100%; margin-top: 5px; }
        input, select { width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 6px; background: white; }
        
        /* Bottom Nav */
        .bottom-nav { display: flex; position: fixed; bottom: 0; left: 0; right: 0; background: white; border-top: 1px solid #eee; height: 60px; z-index: 1000; justify-content: space-around; align-items: center; }
        .nav-tab { background: none; border: none; color: #999; font-size: 11px; display: flex; flex-direction: column; align-items: center; }
        .nav-tab.active { color: #2196F3; }
        .nav-tab-icon { font-size: 20px; margin-bottom: 2px; }
        
        /* Login Screen */
        #loginScreen { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: white; z-index: 3000; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 20px; }
        #loginError { color: red; margin-top: 10px; display: none; }

        /* –ü–†–ê–ó–î–ù–ò–ö–ò: –°—Ç–∏–ª—å –¥–ª—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ —Å–ø–∏—Å–∫–∞ */
        .holiday-list-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            background: #ffffff;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            border-left: 5px solid #2196F3; 
            cursor: pointer;
            transition: all 0.2s;
            margin-bottom: 8px; 
        }
        .holiday-list-item:hover {
            background: #e3f2fd;
            transform: translateY(-1px);
        }
        .holiday-name-date {
            font-weight: bold;
            color: #333;
            max-width: 80%;
        }
        .holiday-days-left {
            font-size: 14px;
            font-weight: 700;
            padding: 4px 8px;
            border-radius: 4px;
            color: white;
            min-width: 60px;
            text-align: center;
        }

        /* –ü–†–ê–ó–î–ù–ò–ö–ò: –°—Ç–∏–ª—å –¥–ª—è –≤—Å–ø–ª—ã–≤–∞—é—â–µ–≥–æ –æ–∫–Ω–∞ */
        #holidayPopup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border: 1px solid #2196F3;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            z-index: 5000;
            max-width: 90%;
            width: 400px;
            display: none; 
            max-height: 80vh;
            overflow-y: auto;
        }
        .popup-close {
            position: absolute;
            top: 5px;
            right: 15px;
            font-size: 24px;
            font-weight: bold;
            color: #999;
            cursor: pointer;
            border: none;
            background: none;
        }
    </style>
</head>
<body>

<div id="loginScreen">
    <h1 style="color: #2196F3; margin-bottom: 20px;">üíï –ù–∞—à–∞ –ò—Å—Ç–æ—Ä–∏—è</h1>
    <div style="width: 100%; max-width: 300px;">
        <label style="font-size: 12px; color: #666; margin-bottom: 4px; display: block;">–ö—Ç–æ —Ç—ã?</label>
        <select id="loginUser">
            <option value="surikat">–°—É—Ä–∏–∫–∞—Ç</option>
            <option value="kot">–ö–æ—Ç</option>
        </select>
        
        <input type="password" id="loginPass" placeholder="–ü–∞—Ä–æ–ª—å">
        <button class="btn" onclick="doLogin()">–í–æ–π—Ç–∏</button>
        <div id="loginError">–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å</div>
    </div>
</div>

<div class="container" id="appContainer" style="display:none;">
    <nav class="sidebar">
        <div class="sidebar-header">üíï –ò—Å—Ç–æ—Ä–∏—è</div>
        <div class="sidebar-nav">
            <button class="nav-item active" onclick="switchScreen('home')">üìä –ì–ª–∞–≤–Ω–∞—è</button>
            <button class="nav-item" onclick="switchScreen('chat')">üí¨ –ß–∞—Ç</button>
            <button class="nav-item" onclick="switchScreen('wall')">üé® –°—Ç–µ–Ω–∞</button>
            <button class="nav-item" onclick="switchScreen('postcards')">üìÆ –û—Ç–∫—Ä—ã—Ç–∫–∏</button>
            <button class="nav-item" onclick="switchScreen('holidays')">üìÖ –ü—Ä–∞–∑–¥–Ω–∏–∫–∏</button> 
            <div style="flex: 1"></div>
            <button class="nav-item" onclick="doLogout()" style="color: #ff4444; border-top: 1px solid #eee;">üö™ –í—ã–π—Ç–∏</button>
        </div>
    </nav>

    <div class="main-content">
        <div class="screen active" id="home">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <div>
                    <h1 style="font-size: 24px; margin-bottom: 5px;">–ù–∞—à–∞ –ò—Å—Ç–æ—Ä–∏—è</h1>
                    <p style="color: #666;">–í–º–µ—Å—Ç–µ —É–∂–µ <strong id="daysTogetherDisplay">...</strong></p>
                </div>
                <button class="btn" style="width: auto; background: #ff4444; padding: 5px 12px; font-size: 13px;" onclick="doLogout()">–í—ã–π—Ç–∏</button>
            </div>
            
            <div class="timer-grid">
                <div class="card">
                    <div class="card-value" id="daysDisplay">0</div>
                    <div class="card-label">–î–Ω–µ–π</div>
                </div>
                <div class="card">
                    <div class="card-value" id="hoursDisplay">0</div>
                    <div class="card-label">–ß–∞—Å–æ–≤</div>
                </div>
                <div class="card">
                    <div class="card-value" id="minutesDisplay">0</div>
                    <div class="card-label">–ú–∏–Ω—É—Ç</div>
                </div>
                <div class="card">
                    <div class="card-value" id="secondsDisplay">0</div>
                    <div class="card-label">–°–µ–∫—É–Ω–¥</div>
                </div>
            </div>

            <h2 style="font-size: 18px; margin: 24px 0 10px;">–î–æ –î–Ω—è –†–æ–∂–¥–µ–Ω–∏—è</h2>
            <div class="cards-grid">
                <div class="card"><div class="card-value" id="daysToP1">...</div><div class="card-label">–°—É—Ä–∏–∫–∞—Ç (12.08)</div></div>
                <div class="card"><div class="card-value" id="daysToP2">...</div><div class="card-label">–ö–æ—Ç (18.03)</div></div>
            </div>

            <h2 style="font-size: 18px; margin: 24px 0 10px;">–í–∞–∂–Ω—ã–µ –¥–∞—Ç—ã</h2>
            <div class="compact-input-group">
                <div>
                    <label style="font-size: 11px; color: #666;">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                    <input type="text" id="impName" placeholder="–°–æ–±—ã—Ç–∏–µ">
                </div>
                <div>
                    <label style="font-size: 11px; color: #666;">–î–∞—Ç–∞</label>
                    <input type="date" id="impDate">
                </div>
                <button class="btn" onclick="addImportantDate()">‚ûï –î–æ–±–∞–≤–∏—Ç—å</button>
            </div>
            <div id="importantDatesGrid"></div>

            <h2 style="font-size: 18px; margin: 24px 0 10px;">üéØ –¶–µ–ª–∏</h2>
            <div class="compact-input-group">
                <div>
                    <label style="font-size: 11px; color: #666;">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                    <input type="text" id="goalName" placeholder="–¶–µ–ª—å">
                </div>
                <div>
                    <label style="font-size: 11px; color: #666;">–î–∞—Ç–∞</label>
                    <input type="date" id="goalDate">
                </div>
                <button class="btn" onclick="addGoal()">‚ú® –î–æ–±–∞–≤–∏—Ç—å</button>
            </div>
            <div id="goalsCompactGrid"></div>
        </div>

        <div class="screen" id="chat">
            <h1>üí¨ –ß–∞—Ç</h1>
            <div class="chat-container">
                <div class="messages" id="messages"></div>
                <div class="chat-input-group">
                    <input type="text" class="chat-input" id="chatInput" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ..." onkeypress="if(event.key==='Enter') sendMessage()">
                    <button class="send-btn" onclick="sendMessage()">‚û§</button>
                </div>
            </div>
        </div>

        <div class="screen" id="wall">
            <h1>üé® –†–∏—Å—É–µ–º –≤–º–µ—Å—Ç–µ</h1>
            <div id="drawingCanvasContainer">
                <canvas id="drawingCanvas"></canvas>
            </div>
            
            <div style="margin-top: 15px; display: flex; align-items: center; justify-content: center; gap: 15px; flex-wrap: wrap;">
                <div style="display: flex; flex-direction: column; align-items: center;">
                    <span style="font-size: 11px; color: #666; margin-bottom: 4px;">–¶–≤–µ—Ç</span>
                    <input type="color" id="colorPicker" value="#000000" style="width: 40px; height: 35px; padding: 0; border: none; background: none;">
                </div>
                
                <button class="btn" style="width: auto; height: 35px; margin-top: 0; background: #607d8b;" onclick="undoWallDrawing()">‚Ü©Ô∏è –û—Ç–º–µ–Ω–∏—Ç—å</button>
                
                <button class="btn" style="width: auto; height: 35px; margin-top: 0;" onclick="clearCanvas()">üóë –û—á–∏—Å—Ç–∏—Ç—å</button>
                <button class="btn" style="width: auto; height: 35px; margin-top: 0;" onclick="saveWallDrawing()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
            
            <h2 style="font-size: 18px; margin: 30px 0 15px;">–ì–∞–ª–µ—Ä–µ—è —Ä–∏—Å—É–Ω–∫–æ–≤</h2>
            <div id="wallGalleryGrid" class="postcards-grid"></div>
        </div>

        <div class="screen" id="postcards">
            <h1>üìÆ –§–æ—Ç–æ-–∫–æ–ª–ª–∞–∂</h1>
            <div style="margin-bottom: 20px;">
                <label class="btn" style="display: block; text-align: center;">
                    üì∏ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ
                    <input type="file" id="imageUpload" accept="image/*" onchange="uploadPostcard(event)" style="display: none;">
                </label>
            </div>
            <div class="postcards-grid" id="postcardsGrid"></div>
        </div>

        <div class="screen" id="holidays">
            <h1>üìÖ –ü—Ä–∞–∑–¥–Ω–∏–∫–∏ –ú–∏—Ä–∞</h1>
            
            <h3 style="margin-bottom: 15px;">–ë–ª–∏–∂–∞–π—à–∏–µ –ü—Ä–∞–∑–¥–Ω–∏–∫–∏</h3>
            <div id="upcomingHolidaysList" style="display: flex; flex-direction: column; gap: 0;">
                <p style="color:#999; text-align: center;">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ –ø—Ä–∞–∑–¥–Ω–∏–∫–∞—Ö...</p>
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button class="btn" id="loadMoreHolidaysBtn" onclick="loadMoreHolidays()" style="width: 200px; display: none; background: #17a2b8;">
                    –ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â–µ 50
                </button>
            </div>
            
            <div id="holidayPopup">
                <button class="popup-close" onclick="document.getElementById('holidayPopup').style.display='none'">√ó</button> 
            </div>
        </div>
        </div>
</div>

<nav class="bottom-nav">
    <button class="nav-tab active" onclick="switchScreen('home')"><span class="nav-tab-icon">üìä</span>–ì–ª–∞–≤–Ω–∞—è</button>
    <button class="nav-tab" onclick="switchScreen('chat')"><span class="nav-tab-icon">üí¨</span>–ß–∞—Ç</button>
    <button class="nav-tab" onclick="switchScreen('wall')"><span class="nav-tab-icon">üé®</span>–°—Ç–µ–Ω–∞</button>
    <button class="nav-tab" onclick="switchScreen('postcards')"><span class="nav-tab-icon">üìÆ</span>–§–æ—Ç–æ</button>
    <button class="nav-tab" onclick="switchScreen('holidays')"><span class="nav-tab-icon">üìÖ</span>–ü—Ä–∞–∑–¥–Ω–∏–∫–∏</button> 
</nav>

<script>
    // ===== –ö–û–ù–§–ò–ì FIREBASE (–ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) =====
    const firebaseConfig = {
      // –ò–°–ü–û–õ–¨–ó–£–ô–¢–ï –°–í–û–ò –ö–õ–Æ–ß–ò!
      apiKey: "AIzaSyA2KdD09QtBYIbFJKvCFMON6A--IxG2MXk",
      authDomain: "peop-3.firebaseapp.com",
      databaseURL: "https://peop-3-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "peop-3",
      storageBucket: "peop-3.firebasestorage.app",
      messagingSenderId: "293847601602",
      appId: "1:293847601602:web:9ad16928d4c1003b5a465b",
    };

    if (!firebase.apps.length) {
        firebase.initializeApp(firebaseConfig);
    }
    const db = firebase.database();

    const SETTINGS = {
        meetingDate: '2024-06-24', 
        p1Name: '–°—É—Ä–∏–∫–∞—Ç', p1Birth: '2000-08-12',
        p2Name: '–ö–æ—Ç',     p2Birth: '2000-03-18'
    };

    let currentUser = localStorage.getItem('currentUser');
    
    const MAX_UNDO_STEPS = 20;
    let undoStack = []; 
    let isDrawing = false; 
    let lastX = 0; 
    let lastY = 0;

    const today = new Date();
    
    // --- –†–ï–ê–õ–¨–ù–´–ï –î–ê–ù–ù–´–ï –û –ü–†–ê–ó–î–ù–ò–ö–ê–• ---
    // –§–æ—Ä–º–∞—Ç: [–º–µ—Å—è—Ü (0-11), –¥–µ–Ω—å, –Ω–∞–∑–≤–∞–Ω–∏–µ, —Å—Ç—Ä–∞–Ω–∞/—Ç–∏–ø, –∫—Ä–∞—Ç–∫–∞—è –∏—Å—Ç–æ—Ä–∏—è]
    const HOLIDAY_DATA_REAL_RAW = [
        // –î–µ–∫–∞–±—Ä—å (–ù–∞—á–∏–Ω–∞—è —Å 4 —á–∏—Å–ª–∞, —Ç.–∫. —Å–µ–≥–æ–¥–Ω—è 4 –¥–µ–∫–∞–±—Ä—è 2025)
        [11, 4, "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –¥–µ–Ω—å –æ–±—ä—è—Ç–∏–π", "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π", "–ù–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –ø—Ä–∞–∑–¥–Ω–∏–∫, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∏–º–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏. –¢—Ä–∞–¥–∏—Ü–∏—è –æ–±–Ω–∏–º–∞—Ç—å –∑–Ω–∞–∫–æ–º—ã—Ö –∏ –Ω–µ–∑–Ω–∞–∫–æ–º—Ü–µ–≤ –¥–ª—è –æ–±–º–µ–Ω–∞ –¥—É—à–µ–≤–Ω—ã–º —Ç–µ–ø–ª–æ–º."],
        [11, 4, "–î–µ–Ω—å –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∏", "–†–æ—Å—Å–∏—è", "–°—á–∏—Ç–∞–µ—Ç—Å—è –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è —Ä–æ—Å—Å–∏–π—Å–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∏, —Ç.–∫. –≤ 1948 –≥–æ–¥—É –±—ã–ª–∞ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∞ –ø–µ—Ä–≤–∞—è –≠–í–ú."],
        [11, 5, "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –¥–µ–Ω—å –¥–æ–±—Ä–æ–≤–æ–ª—å—Ü–µ–≤ (–≤–æ–ª–æ–Ω—Ç–µ—Ä–æ–≤)", "–û–û–ù", "–£—á—Ä–µ–∂–¥–µ–Ω –ì–ê –û–û–ù –≤ 1985 –≥–æ–¥—É –¥–ª—è –ø–æ–æ—â—Ä–µ–Ω–∏—è –¥–æ–±—Ä–æ–≤–æ–ª—å—á–µ—Å–∫–æ–π —Ä–∞–±–æ—Ç—ã."],
        [11, 6, "–î–µ–Ω—å –í–æ–æ—Ä—É–∂–µ–Ω–Ω—ã—Ö –°–∏–ª", "–£–∫—Ä–∞–∏–Ω–∞", "–ì–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–∞–∑–¥–Ω–∏–∫ –≤ —á–µ—Å—Ç—å –ø—Ä–∏–Ω—è—Ç–∏—è –∑–∞–∫–æ–Ω–∞ '–û –í–æ–æ—Ä—É–∂–µ–Ω–Ω—ã—Ö –°–∏–ª–∞—Ö –£–∫—Ä–∞–∏–Ω—ã' –≤ 1991 –≥–æ–¥—É."],
        [11, 6, "–î–µ–Ω—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏", "–§–∏–Ω–ª—è–Ω–¥–∏—è", "–ü—Ä–∞–∑–¥–Ω–∏–∫, –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã–π –æ–±—Ä–µ—Ç–µ–Ω–∏—é –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –†–æ—Å—Å–∏–∏ –≤ 1917 –≥–æ–¥—É."],
        [11, 7, "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –¥–µ–Ω—å –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–π –∞–≤–∏–∞—Ü–∏–∏", "–û–û–ù/–ò–ö–ê–û", "–û—Ç–º–µ—á–∞–µ—Ç—Å—è –≤ —á–µ—Å—Ç—å –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è –ß–∏–∫–∞–≥—Å–∫–æ–π –∫–æ–Ω–≤–µ–Ω—Ü–∏–∏ 1944 –≥–æ–¥–∞."],
        [11, 8, "–î–µ–Ω—å —Ö—É–¥–æ–∂–Ω–∏–∫–∞", "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π", "–ü—Ä–∞–∑–¥–Ω–∏–∫, —É—á—Ä–µ–∂–¥–µ–Ω–Ω—ã–π –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–π –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–µ–π '–ò—Å–∫—É—Å—Å—Ç–≤–æ –Ω–∞—Ä–æ–¥–æ–≤ –º–∏—Ä–∞'."],
        [11, 8, "–î–µ–Ω—å —Ä–∞–±–æ—Ç–Ω–∏–∫–∞ —Ä–∞–¥–∏–æ—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –≤–æ–π—Å–∫", "–†–æ—Å—Å–∏—è", "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø—Ä–∞–∑–¥–Ω–∏–∫, –æ—Ç–º–µ—á–∞–µ—Ç—Å—è —Å 2006 –≥–æ–¥–∞."],
        [11, 9, "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –¥–µ–Ω—å –±–æ—Ä—å–±—ã —Å –∫–æ—Ä—Ä—É–ø—Ü–∏–µ–π", "–û–û–ù", "–£—á—Ä–µ–∂–¥–µ–Ω –≤ —á–µ—Å—Ç—å –ø—Ä–∏–Ω—è—Ç–∏—è –ö–æ–Ω–≤–µ–Ω—Ü–∏–∏ –û–û–ù –ø—Ä–æ—Ç–∏–≤ –∫–æ—Ä—Ä—É–ø—Ü–∏–∏ –≤ 2003 –≥–æ–¥—É."],
        [11, 10, "–î–µ–Ω—å –ø—Ä–∞–≤ —á–µ–ª–æ–≤–µ–∫–∞", "–û–û–ù", "–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ —á–µ—Å—Ç—å –ø—Ä–∏–Ω—è—Ç–∏—è –í—Å–µ–æ–±—â–µ–π –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏ –ø—Ä–∞–≤ —á–µ–ª–æ–≤–µ–∫–∞ –≤ 1948 –≥–æ–¥—É."],
        [11, 11, "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –¥–µ–Ω—å –≥–æ—Ä", "–û–û–ù", "–ü—Ä–∞–∑–¥–Ω–∏–∫, –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã–π –≤–∞–∂–Ω–æ—Å—Ç–∏ –≥–æ—Ä –≤ –∂–∏–∑–Ω–∏ –ø–ª–∞–Ω–µ—Ç—ã."],
        [11, 12, "–í—Å–µ–º–∏—Ä–Ω—ã–π –¥–µ–Ω—å —Å—É—à–∏", "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π", "–ü—Ä–∞–∑–¥–Ω–∏–∫, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –≤ 2009 –≥–æ–¥—É –¥–ª—è –ø–æ–ø—É–ª—è—Ä–∏–∑–∞—Ü–∏–∏ —è–ø–æ–Ω—Å–∫–æ–π –∫—É—Ö–Ω–∏."],
        [11, 13, "–í—Å–µ–º–∏—Ä–Ω—ã–π –¥–µ–Ω—å –¥–µ—Ç—Å–∫–æ–≥–æ —Ç–µ–ª–µ–≤–∏–¥–µ–Ω–∏—è –∏ —Ä–∞–¥–∏–æ–≤–µ—â–∞–Ω–∏—è", "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π", "–û—Ç–º–µ—á–∞–µ—Ç—Å—è –ø–æ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–µ –Æ–ù–ò–°–ï–§."],
        [11, 14, "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –¥–µ–Ω—å –æ–±–µ–∑—å—è–Ω", "–ù–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π", "–ü—Ä–∞–∑–¥–Ω–∏–∫, –≤–æ–∑–Ω–∏–∫—à–∏–π –≤ –°–®–ê –∏ –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã–π –≤—Å–µ–º –æ–±–µ–∑—å—è–Ω–∞–º –∏ –ø—Ä–∏–º–∞—Ç–∞–º."],
        [11, 15, "–î–µ–Ω—å —á–∞—è", "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π", "–£—á—Ä–µ–∂–¥–µ–Ω –ì–ê –û–û–ù –¥–ª—è –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—è –≤–Ω–∏–º–∞–Ω–∏—è –∫ –ø—Ä–æ–±–ª–µ–º–∞–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π —á–∞—è."],
        [11, 16, "–î–µ–Ω—å –ë–∞—Ö–∞", "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π", "–ù–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –¥–µ–Ω—å, –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã–π –≤–µ–ª–∏–∫–æ–º—É –∫–æ–º–ø–æ–∑–∏—Ç–æ—Ä—É –ò–æ–≥–∞–Ω–Ω—É –°–µ–±–∞—Å—Ç—å—è–Ω—É –ë–∞—Ö—É."],
        [11, 17, "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –¥–µ–Ω—å –∑–∞—â–∏—Ç—ã —Å–µ–∫—Å-—Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤ –æ—Ç –Ω–∞—Å–∏–ª–∏—è", "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π", "–û—Ç–º–µ—á–∞–µ—Ç—Å—è —Å 2003 –≥–æ–¥–∞."],
        [11, 18, "–î–µ–Ω—å –û–û–ù –ø–æ –≤–æ–ø—Ä–æ—Å–∞–º –º–∏–≥—Ä–∞—Ü–∏–∏", "–û–û–ù", "–ü—Ä–∞–∑–¥–Ω–∏–∫, –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã–π –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–π –∫–æ–Ω–≤–µ–Ω—Ü–∏–∏ –æ –∑–∞—â–∏—Ç–µ –ø—Ä–∞–≤ —Ç—Ä—É–¥—è—â–∏—Ö—Å—è-–º–∏–≥—Ä–∞–Ω—Ç–æ–≤."],
        [11, 19, "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –¥–µ–Ω—å –ø–æ–º–æ—â–∏ –±–µ–¥–Ω—ã–º", "–û–û–ù", "–î–µ–Ω—å, –Ω–∞–ø–æ–º–∏–Ω–∞—é—â–∏–π –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –±–æ—Ä—å–±—ã —Å –Ω–∏—â–µ—Ç–æ–π."],
        [11, 20, "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –¥–µ–Ω—å —Å–æ–ª–∏–¥–∞—Ä–Ω–æ—Å—Ç–∏ –ª—é–¥–µ–π", "–û–û–ù", "–û–¥–∏–Ω –∏–∑ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö –¥–Ω–µ–π –û–û–ù."],
        [11, 21, "–î–µ–Ω—å –∑–∏–º–Ω–µ–≥–æ —Å–æ–ª–Ω—Ü–µ—Å—Ç–æ—è–Ω–∏—è", "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π", "–°–∞–º—ã–π –∫–æ—Ä–æ—Ç–∫–∏–π –¥–µ–Ω—å –≥–æ–¥–∞ –≤ –°–µ–≤–µ—Ä–Ω–æ–º –ø–æ–ª—É—à–∞—Ä–∏–∏."],
        [11, 22, "–î–µ–Ω—å —ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞", "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π", "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø—Ä–∞–∑–¥–Ω–∏–∫ —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤ —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ—Å—Ç–∏."],
        [11, 24, "–î–µ–Ω—å —Å–æ—á–µ–ª—å–Ω–∏–∫–∞ (–ù–æ—á—å –ø–µ—Ä–µ–¥ –†–æ–∂–¥–µ—Å—Ç–≤–æ–º)", "–•—Ä–∏—Å—Ç–∏–∞–Ω—Å–∫–∏–π", "–í–µ—á–µ—Ä –∏ –Ω–æ—á—å –ø–µ—Ä–µ–¥ –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–º –†–æ–∂–¥–µ—Å—Ç–≤–∞."],
        [11, 25, "–†–æ–∂–¥–µ—Å—Ç–≤–æ", "–•—Ä–∏—Å—Ç–∏–∞–Ω—Å–∫–∏–π", "–û–¥–∏–Ω –∏–∑ –≥–ª–∞–≤–Ω—ã—Ö —Ö—Ä–∏—Å—Ç–∏–∞–Ω—Å–∫–∏—Ö –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤, –æ—Ç–º–µ—á–∞–µ–º—ã–π –ø–æ –≥—Ä–∏–≥–æ—Ä–∏–∞–Ω—Å–∫–æ–º—É –∫–∞–ª–µ–Ω–¥–∞—Ä—é."],
        [11, 26, "–î–µ–Ω—å –ø–æ–¥–∞—Ä–∫–æ–≤ (Boxing Day)", "–í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è/–°–æ–¥—Ä—É–∂–µ—Å—Ç–≤–æ", "–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π –ø—Ä–∞–∑–¥–Ω–∏–∫, –æ—Ç–º–µ—á–∞–µ–º—ã–π –≤ –∫–∞—Ç–æ–ª–∏—á–µ—Å–∫–∏—Ö —Å—Ç—Ä–∞–Ω–∞—Ö."],
        [11, 31, "–ù–æ–≤—ã–π –≥–æ–¥", "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π", "–ü–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–Ω—å –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–æ–≥–æ –≥–æ–¥–∞, –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ø—Ä–∞–∑–¥–Ω–∏–∫—É."],
        
        // –Ø–Ω–≤–∞—Ä—å
        [0, 1, "–ù–æ–≤—ã–π –≥–æ–¥", "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π", "–ù–∞—á–∞–ª–æ –Ω–æ–≤–æ–≥–æ –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–æ–≥–æ –≥–æ–¥–∞."],
        [0, 4, "–í—Å–µ–º–∏—Ä–Ω—ã–π –¥–µ–Ω—å –∞–∑–±—É–∫–∏ –ë—Ä–∞–π–ª—è", "–û–û–ù", "–ü—Ä–∞–∑–¥–Ω–∏–∫, –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã–π —Å–æ–∑–¥–∞—Ç–µ–ª—é —à—Ä–∏—Ñ—Ç–∞ –¥–ª—è –Ω–µ–∑—Ä—è—á–∏—Ö."],
        [0, 7, "–†–æ–∂–¥–µ—Å—Ç–≤–æ (–ü—Ä–∞–≤–æ—Å–ª–∞–≤–Ω–æ–µ)", "–ü—Ä–∞–≤–æ—Å–ª–∞–≤–Ω—ã–π", "–ü—Ä–∞–∑–¥–Ω–∏–∫, –æ—Ç–º–µ—á–∞–µ–º—ã–π –ø–æ —é–ª–∏–∞–Ω—Å–∫–æ–º—É –∫–∞–ª–µ–Ω–¥–∞—Ä—é."],
        [0, 11, "–í—Å–µ–º–∏—Ä–Ω—ã–π –¥–µ–Ω—å '–°–ø–∞—Å–∏–±–æ'", "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π", "–î–µ–Ω—å, –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞—é—â–∏–π –≤–∞–∂–Ω–æ—Å—Ç—å –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏."],
        [0, 21, "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –¥–µ–Ω—å –æ–±—ä—è—Ç–∏–π", "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π", "–ï—â–µ –æ–¥–∏–Ω –Ω–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –¥–µ–Ω—å –æ–±—ä—è—Ç–∏–π."],
        
        // –§–µ–≤—Ä–∞–ª—å
        [1, 4, "–í—Å–µ–º–∏—Ä–Ω—ã–π –¥–µ–Ω—å –±–æ—Ä—å–±—ã –ø—Ä–æ—Ç–∏–≤ —Ä–∞–∫–∞", "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π", "–£—á—Ä–µ–∂–¥–µ–Ω –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–º –ø—Ä–æ—Ç–∏–≤–æ—Ä–∞–∫–æ–≤—ã–º —Å–æ—é–∑–æ–º."],
        [1, 14, "–î–µ–Ω—å –°–≤—è—Ç–æ–≥–æ –í–∞–ª–µ–Ω—Ç–∏–Ω–∞", "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π", "–ü—Ä–∞–∑–¥–Ω–∏–∫ –≤—Å–µ—Ö –≤–ª—é–±–ª–µ–Ω–Ω—ã—Ö."],
        [1, 20, "–í—Å–µ–º–∏—Ä–Ω—ã–π –¥–µ–Ω—å —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç–∏", "–û–û–ù", "–î–µ–Ω—å, –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã–π –±–æ—Ä—å–±–µ —Å –±–µ–¥–Ω–æ—Å—Ç—å—é –∏ –±–µ–∑—Ä–∞–±–æ—Ç–∏—Ü–µ–π."],
        [1, 23, "–î–µ–Ω—å –∑–∞—â–∏—Ç–Ω–∏–∫–∞ –û—Ç–µ—á–µ—Å—Ç–≤–∞", "–†–æ—Å—Å–∏—è", "–ü—Ä–∞–∑–¥–Ω–∏–∫, –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã–π –≤–æ–µ–Ω–Ω–æ—Å–ª—É–∂–∞—â–∏–º."],
        
        // –ú–∞—Ä—Ç
        [2, 8, "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –∂–µ–Ω—Å–∫–∏–π –¥–µ–Ω—å", "–û–û–ù", "–î–µ–Ω—å –±–æ—Ä—å–±—ã –∂–µ–Ω—â–∏–Ω –∑–∞ —Å–≤–æ–∏ –ø—Ä–∞–≤–∞."],
        [2, 14, "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –¥–µ–Ω—å —á–∏—Å–ª–∞ –ü–∏", "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π", "–ü—Ä–∞–∑–¥–Ω–∏–∫, –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã–π –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–æ–Ω—Å—Ç–∞–Ω—Ç–µ (3.14)."],
        [2, 17, "–î–µ–Ω—å —Å–≤—è—Ç–æ–≥–æ –ü–∞—Ç—Ä–∏–∫–∞", "–ò—Ä–ª–∞–Ω–¥–∏—è", "–ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø—Ä–∞–∑–¥–Ω–∏–∫ –ò—Ä–ª–∞–Ω–¥–∏–∏, –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã–π –ø–æ–∫—Ä–æ–≤–∏—Ç–µ–ª—é —Å—Ç—Ä–∞–Ω—ã."],
        [2, 20, "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –¥–µ–Ω—å —Å—á–∞—Å—Ç—å—è", "–û–û–ù", "–£—á—Ä–µ–∂–¥–µ–Ω –¥–ª—è –ø—Ä–∏–∑–Ω–∞–Ω–∏—è –≤–∞–∂–Ω–æ—Å—Ç–∏ —Å—á–∞—Å—Ç—å—è –∏ –±–ª–∞–≥–æ–ø–æ–ª—É—á–∏—è."],
        
        // –ê–ø—Ä–µ–ª—å
        [3, 1, "–î–µ–Ω—å —Å–º–µ—Ö–∞ (–î–µ–Ω—å –¥—É—Ä–∞–∫–∞)", "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π", "–ù–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –ø—Ä–∞–∑–¥–Ω–∏–∫, —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å —Ä–æ–∑—ã–≥—Ä—ã—à–∞–º–∏."],
        [3, 7, "–í—Å–µ–º–∏—Ä–Ω—ã–π –¥–µ–Ω—å –∑–¥–æ—Ä–æ–≤—å—è", "–í–û–ó", "–û—Ç–º–µ—á–∞–µ—Ç—Å—è –≤ –¥–µ–Ω—å —Å–æ–∑–¥–∞–Ω–∏—è –í—Å–µ–º–∏—Ä–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∑–¥—Ä–∞–≤–æ–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è."],
        [3, 12, "–í—Å–µ–º–∏—Ä–Ω—ã–π –¥–µ–Ω—å –∞–≤–∏–∞—Ü–∏–∏ –∏ –∫–æ—Å–º–æ–Ω–∞–≤—Ç–∏–∫–∏", "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π", "–ü–æ—Å–≤—è—â–µ–Ω –ø–µ—Ä–≤–æ–º—É –ø–æ–ª–µ—Ç—É —á–µ–ª–æ–≤–µ–∫–∞ –≤ –∫–æ—Å–º–æ—Å (–Æ. –ì–∞–≥–∞—Ä–∏–Ω, 1961)."],
        [3, 22, "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –¥–µ–Ω—å –ú–∞—Ç–µ—Ä–∏-–ó–µ–º–ª–∏", "–û–û–ù", "–ü—Ä–∞–∑–¥–Ω–∏–∫, –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã–π –∑–∞—â–∏—Ç–µ –æ–∫—Ä—É–∂–∞—é—â–µ–π —Å—Ä–µ–¥—ã."],
        
        // –ú–∞–π
        [4, 1, "–ü—Ä–∞–∑–¥–Ω–∏–∫ –í–µ—Å–Ω—ã –∏ –¢—Ä—É–¥–∞", "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π", "–ü–µ—Ä–≤–æ–º–∞–π."],
        [4, 9, "–î–µ–Ω—å –ü–æ–±–µ–¥—ã", "–°–ù–ì", "–ü—Ä–∞–∑–¥–Ω–∏–∫ –ø–æ–±–µ–¥—ã –Ω–∞–¥ –Ω–∞—Ü–∏—Å—Ç—Å–∫–æ–π –ì–µ—Ä–º–∞–Ω–∏–µ–π."],
        [4, 15, "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –¥–µ–Ω—å —Å–µ–º–µ–π", "–û–û–ù", "–ü—Ä–∞–∑–¥–Ω–∏–∫, –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã–π –≤–∞–∂–Ω–æ—Å—Ç–∏ —Å–µ–º—å–∏."],
        [4, 20, "–í—Å–µ–º–∏—Ä–Ω—ã–π –¥–µ–Ω—å –ø—á–µ–ª", "–û–û–ù", "–î–µ–Ω—å, –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã–π —Ä–æ–ª–∏ –ø—á–µ–ª –∏ –¥—Ä—É–≥–∏—Ö –æ–ø—ã–ª–∏—Ç–µ–ª–µ–π."],
        [4, 28, "–î–µ–Ω—å –ø–æ–≥—Ä–∞–Ω–∏—á–Ω–∏–∫–∞", "–†–æ—Å—Å–∏—è/–ë–µ–ª–∞—Ä—É—Å—å", "–ü—Ä–∞–∑–¥–Ω–∏–∫ –≤ —á–µ—Å—Ç—å —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤ –ø–æ–≥—Ä–∞–Ω–∏—á–Ω–æ–π —Å–ª—É–∂–±—ã."],
        
        // –ò—é–Ω—å
        [5, 1, "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –¥–µ–Ω—å –∑–∞—â–∏—Ç—ã –¥–µ—Ç–µ–π", "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π", "–û–¥–∏–Ω –∏–∑ —Å—Ç–∞—Ä–µ–π—à–∏—Ö –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤."],
        [5, 5, "–í—Å–µ–º–∏—Ä–Ω—ã–π –¥–µ–Ω—å –æ–∫—Ä—É–∂–∞—é—â–µ–π —Å—Ä–µ–¥—ã", "–û–û–ù", "–ì–ª–∞–≤–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –∫–∞–ª–µ–Ω–¥–∞—Ä—è."],
        [5, 12, "–î–µ–Ω—å –†–æ—Å—Å–∏–∏", "–†–æ—Å—Å–∏—è", "–ü—Ä–∞–∑–¥–Ω–∏–∫, –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã–π –ø—Ä–∏–Ω—è—Ç–∏—é –î–µ–∫–ª–∞—Ä–∞—Ü–∏–∏ –æ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–º —Å—É–≤–µ—Ä–µ–Ω–∏—Ç–µ—Ç–µ –†–°–§–°–†."],
        [5, 21, "–í—Å–µ–º–∏—Ä–Ω—ã–π –¥–µ–Ω—å –π–æ–≥–∏", "–û–û–ù", "–£—á—Ä–µ–∂–¥–µ–Ω –≤ 2014 –≥–æ–¥—É."],
        
        // –ò—é–ª—å
        [6, 7, "–ò–≤–∞–Ω –ö—É–ø–∞–ª–∞", "–°–ª–∞–≤—è–Ω—Å–∫–∏–π", "–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π –≤–æ—Å—Ç–æ—á–Ω–æ—Å–ª–∞–≤—è–Ω—Å–∫–∏–π –ø—Ä–∞–∑–¥–Ω–∏–∫."],
        [6, 11, "–í—Å–µ–º–∏—Ä–Ω—ã–π –¥–µ–Ω—å –Ω–∞—Ä–æ–¥–æ–Ω–∞—Å–µ–ª–µ–Ω–∏—è", "–û–û–ù", "–ü—Ä–∞–∑–¥–Ω–∏–∫, –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã–π –¥–µ–º–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º –ø—Ä–æ–±–ª–µ–º–∞–º."],
        [6, 17, "–í—Å–µ–º–∏—Ä–Ω—ã–π –¥–µ–Ω—å —ç–º–æ–¥–∑–∏", "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π", "–ù–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –ø—Ä–∞–∑–¥–Ω–∏–∫ –≤ —á–µ—Å—Ç—å —Å–º–∞–π–ª–∏–∫–æ–≤."],
        [6, 20, "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –¥–µ–Ω—å —à–∞—Ö–º–∞—Ç", "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π", "–ü—Ä–∞–∑–¥–Ω–∏–∫, –æ—Ç–º–µ—á–∞–µ–º—ã–π –ø–æ —Ä–µ—à–µ–Ω–∏—é –§–ò–î–ï."],
        
        // –ê–≤–≥—É—Å—Ç
        [7, 1, "–í—Å–µ–º–∏—Ä–Ω—ã–π –¥–µ–Ω—å –≥—Ä—É–¥–Ω–æ–≥–æ –≤—Å–∫–∞—Ä–º–ª–∏–≤–∞–Ω–∏—è", "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π", "–û—Ç–º–µ—á–∞–µ—Ç—Å—è –≤ –ø–µ—Ä–≤—É—é –Ω–µ–¥–µ–ª—é –∞–≤–≥—É—Å—Ç–∞."],
        [7, 12, "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –¥–µ–Ω—å –º–æ–ª–æ–¥–µ–∂–∏", "–û–û–ù", "–ü—Ä–∞–∑–¥–Ω–∏–∫, –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã–π –≤–æ–ø—Ä–æ—Å–∞–º –º–æ–ª–æ–¥–µ–∂–∏."],
        [7, 19, "–í—Å–µ–º–∏—Ä–Ω—ã–π –¥–µ–Ω—å –≥—É–º–∞–Ω–∏—Ç–∞—Ä–Ω–æ–π –ø–æ–º–æ—â–∏", "–û–û–ù", "–î–µ–Ω—å, –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º –≥—É–º–∞–Ω–∏—Ç–∞—Ä–Ω–æ–π —Å—Ñ–µ—Ä—ã."],
        [7, 24, "–î–µ–Ω—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏", "–£–∫—Ä–∞–∏–Ω–∞", "–ì–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–∞–∑–¥–Ω–∏–∫ –≤ —á–µ—Å—Ç—å –ø—Ä–∏–Ω—è—Ç–∏—è –ê–∫—Ç–∞ –ø—Ä–æ–≤–æ–∑–≥–ª–∞—à–µ–Ω–∏—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –£–∫—Ä–∞–∏–Ω—ã."],
        
        // –°–µ–Ω—Ç—è–±—Ä—å
        [8, 1, "–î–µ–Ω—å –∑–Ω–∞–Ω–∏–π", "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π", "–ù–∞—á–∞–ª–æ —É—á–µ–±–Ω–æ–≥–æ –≥–æ–¥–∞."],
        [8, 8, "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –¥–µ–Ω—å –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç–∏", "–Æ–ù–ï–°–ö–û", "–ü—Ä–∞–∑–¥–Ω–∏–∫, –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã–π —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç–∏."],
        [8, 21, "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –¥–µ–Ω—å –º–∏—Ä–∞", "–û–û–ù", "–î–µ–Ω—å –ø—Ä–µ–∫—Ä–∞—â–µ–Ω–∏—è –æ–≥–Ω—è –∏ –æ—Ç–∫–∞–∑–∞ –æ—Ç –Ω–∞—Å–∏–ª–∏—è."],
        [8, 27, "–í—Å–µ–º–∏—Ä–Ω—ã–π –¥–µ–Ω—å —Ç—É—Ä–∏–∑–º–∞", "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π", "–ü—Ä–∞–∑–¥–Ω–∏–∫, —É—á—Ä–µ–∂–¥–µ–Ω–Ω—ã–π –í—Å–µ–º–∏—Ä–Ω–æ–π —Ç—É—Ä–∏—Å—Ç—Å–∫–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–µ–π."],
        
        // –û–∫—Ç—è–±—Ä—å
        [9, 1, "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –¥–µ–Ω—å –ø–æ–∂–∏–ª—ã—Ö –ª—é–¥–µ–π", "–û–û–ù", "–ü—Ä–∞–∑–¥–Ω–∏–∫, –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã–π —Å—Ç–∞—Ä—à–µ–º—É –ø–æ–∫–æ–ª–µ–Ω–∏—é."],
        [9, 4, "–í—Å–µ–º–∏—Ä–Ω—ã–π –¥–µ–Ω—å –∑–∞—â–∏—Ç—ã –∂–∏–≤–æ—Ç–Ω—ã—Ö", "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π", "–ü—Ä–∞–∑–¥–Ω–∏–∫ –≤ —á–µ—Å—Ç—å –°–≤—è—Ç–æ–≥–æ –§—Ä–∞–Ω—Ü–∏—Å–∫–∞ –ê—Å—Å–∏–∑—Å–∫–æ–≥–æ, –ø–æ–∫—Ä–æ–≤–∏—Ç–µ–ª—è –∂–∏–≤–æ—Ç–Ω—ã—Ö."],
        [9, 5, "–í—Å–µ–º–∏—Ä–Ω—ã–π –¥–µ–Ω—å —É—á–∏—Ç–µ–ª—è", "–Æ–ù–ï–°–ö–û", "–î–µ–Ω—å, –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã–π –≤—Å–µ–º —É—á–∏—Ç–µ–ª—è–º."],
        [9, 31, "–•—ç–ª–ª–æ—É–∏–Ω", "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π", "–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø—Ä–∞–∑–¥–Ω–∏–∫, –≤–æ—Å—Ö–æ–¥—è—â–∏–π –∫ —Ç—Ä–∞–¥–∏—Ü–∏—è–º –¥—Ä–µ–≤–Ω–∏—Ö –∫–µ–ª—å—Ç–æ–≤."],
        
        // –ù–æ—è–±—Ä—å
        [10, 1, "–í—Å–µ–º–∏—Ä–Ω—ã–π –¥–µ–Ω—å –≤–µ–≥–∞–Ω–∞", "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π", "–û—Ç–º–µ—á–∞–µ—Ç—Å—è —Å 1994 –≥–æ–¥–∞."],
        [10, 4, "–î–µ–Ω—å –Ω–∞—Ä–æ–¥–Ω–æ–≥–æ –µ–¥–∏–Ω—Å—Ç–≤–∞", "–†–æ—Å—Å–∏—è", "–ü—Ä–∞–∑–¥–Ω–∏–∫, –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã–π —Å–æ–±—ã—Ç–∏—è–º 1612 –≥–æ–¥–∞."],
        [10, 10, "–í—Å–µ–º–∏—Ä–Ω—ã–π –¥–µ–Ω—å –Ω–∞—É–∫–∏ –∑–∞ –º–∏—Ä –∏ —Ä–∞–∑–≤–∏—Ç–∏–µ", "–Æ–ù–ï–°–ö–û", "–ü—Ä–∞–∑–¥–Ω–∏–∫, –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã–π —Ä–æ–ª–∏ –Ω–∞—É–∫–∏ –≤ –æ–±—â–µ—Å—Ç–≤–µ."],
        [10, 19, "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –º—É–∂—Å–∫–æ–π –¥–µ–Ω—å", "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π", "–ü—Ä–∞–∑–¥–Ω–∏–∫, –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã–π –º–∞–ª—å—á–∏–∫–∞–º –∏ –º—É–∂—á–∏–Ω–∞–º."],
        [10, 20, "–í—Å–µ–º–∏—Ä–Ω—ã–π –¥–µ–Ω—å —Ä–µ–±–µ–Ω–∫–∞", "–û–û–ù", "–ü—Ä–∞–∑–¥–Ω–∏–∫ –≤ —á–µ—Å—Ç—å –ø—Ä–∏–Ω—è—Ç–∏—è –î–µ–∫–ª–∞—Ä–∞—Ü–∏–∏ –ø—Ä–∞–≤ —Ä–µ–±–µ–Ω–∫–∞."],
    ];

    // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º —Ä–µ–∞–ª—å–Ω—ã–µ –ø—Ä–∞–∑–¥–Ω–∏–∫–∏ –ø–æ –¥–∞—Ç–∞–º –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞.
    const HOLIDAY_DATA_REAL_BY_DATE = {};
    HOLIDAY_DATA_REAL_RAW.forEach(([month, day, name, country, summary]) => {
        const key = `${month}-${day}`;
        if (!HOLIDAY_DATA_REAL_BY_DATE[key]) {
            HOLIDAY_DATA_REAL_BY_DATE[key] = [];
        }
        HOLIDAY_DATA_REAL_BY_DATE[key].push({ name, country, summary });
    });

    // –°–æ–∑–¥–∞–µ–º –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ –¥–ª—è –∏—Ç–µ—Ä–∞—Ü–∏–∏ (366 –¥–Ω–µ–π)
    const HOLIDAY_DATA_FULL = [];
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞—Ç—ã N –¥–Ω–µ–π –≤–ø–µ—Ä–µ–¥
    const getFutureDate = (start, days) => {
        const date = new Date(start);
        date.setDate(start.getDate() + days);
        return date;
    };

    // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ –Ω–∞ 366 –¥–Ω–µ–π –≤–ø–µ—Ä–µ–¥
    for (let i = 0; i < 366; i++) {
        const date = getFutureDate(today, i);
        const monthIndex = date.getMonth();
        const day = date.getDate();
        const key = `${monthIndex}-${day}`;
        
        const holidaysForDay = HOLIDAY_DATA_REAL_BY_DATE[key] || [];

        // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–∞ —ç—Ç–æ—Ç –¥–µ–Ω—å –µ—Å—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –ø—Ä–∞–∑–¥–Ω–∏–∫–∏.
        // –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏—Ç —Å–ø–∏—Å–æ–∫ —Ç–æ–ª—å–∫–æ –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ –∑–∞–ø–∏—Å—è–º–∏, –Ω–æ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç 366 —Å—Ç—Ä–æ–∫.
        if (holidaysForDay.length > 0) {
            HOLIDAY_DATA_FULL.push({
                date: date,
                name: `${day} ${MONTHS[monthIndex]}`,
                holidays: holidaysForDay
            });
        }
    }

    let loadedHolidayIndex = 0;
    const LOAD_STEP = 50;

    // ... (–û—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, Firebase listeners - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
    // --- (–ö–æ–¥ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, —Ç–∞–π–º–µ—Ä–æ–≤, —á–∞—Ç–∞, —Å—Ç–µ–Ω—ã, —Ñ–æ—Ç–æ –∏ —Ç.–¥. –æ—Å—Ç–∞–µ—Ç—Å—è, –∫–∞–∫ –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏) ---
    // ...

    // ===== –õ–û–ì–ò–ö–ê UI (–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞) =====
    function switchScreen(id) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.querySelectorAll('.nav-tab, .nav-item').forEach(b => b.classList.remove('active'));
        document.querySelectorAll(`[onclick="switchScreen('${id}')"]`).forEach(t => t.classList.add('active'));
        if(id === 'wall') resizeCanvas();
        if(id === 'holidays') renderHolidaysList(true); 
    }
    
    // ... (–§—É–Ω–∫—Ü–∏–∏ updateCounters, calcBirthday, sendMessage, deleteMessage, addImportantDate, addGoal, deleteItem - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
    // ... (–§—É–Ω–∫—Ü–∏–∏ —Ä–∏—Å–æ–≤–∞–Ω–∏—è - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
    // ... (–§—É–Ω–∫—Ü–∏—è uploadPostcard - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)


    // ===================================================================
    //                  –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø –†–ê–ó–î–ï–õ–ê "–ü–†–ê–ó–î–ù–ò–ö–ò"
    // ===================================================================

    // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–ø–ª—ã–≤–∞—é—â–µ–≥–æ –æ–∫–Ω–∞ (–¢–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏)
    function showHolidayDetails(holiday) {
        const popup = document.getElementById('holidayPopup');

        const detailsHtml = holiday.holidays.map(h => `
            <div style="margin-bottom: 10px; border-left: 3px solid #2196F3; padding-left: 10px;">
                <p><strong>${h.name}</strong></p>
                <p style="font-size: 13px; color: #555;">–°—Ç—Ä–∞–Ω–∞ / –¢–∏–ø: ${h.country}</p>
                <p style="font-size: 12px; line-height: 1.4;">${h.summary}</p>
            </div>
        `).join('<hr style="border: none; border-top: 1px dashed #eee; margin: 15px 0;">');

        popup.innerHTML = `
            <button class="popup-close" onclick="document.getElementById('holidayPopup').style.display='none'">√ó</button>
            <h3 style="color: #2196F3; margin-bottom: 15px;">${holiday.name}</h3>
            <p style="color: #666; margin-bottom: 15px; font-weight: bold;">–í—Å–µ–≥–æ –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤: ${holiday.holidays.length}</p>
            ${detailsHtml}
        `;
        popup.style.display = 'block';
    }

    // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å–ø–∏—Å–∫–∞ (–ü–æ–¥–≥—Ä—É–∑–∫–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)
    function renderHolidaysList(reset = false) {
        const listDiv = document.getElementById('upcomingHolidaysList');
        const loadBtn = document.getElementById('loadMoreHolidaysBtn');
        const currentToday = new Date();

        if (reset) {
            listDiv.innerHTML = '';
            loadedHolidayIndex = 0;
        }

        const startIndex = loadedHolidayIndex;
        const endIndex = Math.min(startIndex + LOAD_STEP, HOLIDAY_DATA_FULL.length);
        const fragment = document.createDocumentFragment();

        if (HOLIDAY_DATA_FULL.length === 0 && reset) {
            listDiv.innerHTML = '<p style="color:#999; text-align: center;">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –ø—Ä–∞–∑–¥–Ω–∏–∫–∞—Ö –Ω–∞ –±–ª–∏–∂–∞–π—à–∏–π –≥–æ–¥.</p>';
        }

        for (let i = startIndex; i < endIndex; i++) {
            const holidayDay = HOLIDAY_DATA_FULL[i];
            const targetDate = holidayDay.date;
            
            // –†–∞—Å—á–µ—Ç –¥–Ω–µ–π (–Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–µ–≥–æ–¥–Ω—è—à–Ω—é—é –¥–∞—Ç—É –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞)
            const diffTime = targetDate.getTime() - currentToday.getTime();
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            let daysText, color;
            if (diffDays === 0) {
                daysText = '–°–µ–≥–æ–¥–Ω—è!';
                color = '#28a745';
            } else if (diffDays === 1) {
                daysText = '–ó–∞–≤—Ç—Ä–∞!';
                color = '#ffc107';
            } else {
                daysText = `${diffDays} –¥–Ω–µ–π`;
                color = '#2196F3';
            }

            const item = document.createElement('div');
            item.className = 'holiday-list-item';
            item.onclick = () => showHolidayDetails(holidayDay);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–µ —Ç—Ä–∏ –ø—Ä–∞–∑–¥–Ω–∏–∫–∞
            const firstHolidays = holidayDay.holidays.slice(0, 3).map(h => h.name).join('; ');
            const moreText = holidayDay.holidays.length > 3 ? ` –∏ –µ—â—ë ${holidayDay.holidays.length - 3}` : '';

            item.innerHTML = `
                <div class="holiday-name-date">
                    ${holidayDay.name} 
                    <div style="font-size: 11px; color: #666; font-weight: normal; margin-top: 2px;">
                        ${firstHolidays}${moreText}
                    </div>
                </div>
                <div class="holiday-days-left" style="background-color: ${color};">
                    ${daysText}
                </div>
            `;
            fragment.appendChild(item);
        }

        listDiv.appendChild(fragment);
        loadedHolidayIndex = endIndex;

        if (loadedHolidayIndex < HOLIDAY_DATA_FULL.length) {
            loadBtn.style.display = 'block';
        } else {
            loadBtn.style.display = 'none';
        }
    }

    function loadMoreHolidays() {
        renderHolidaysList(false);
    }
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    // ... (–õ–æ–≥–∏–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏: checkAuth, setInterval, event listeners - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)

</script>
</body>
</html>
